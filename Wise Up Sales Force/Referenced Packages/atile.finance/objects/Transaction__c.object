<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Follow</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <deprecated>false</deprecated>
    <enableActivities>true</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <fields>
        <fullName>Accounts_Payable_Contact__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Accounts Payable Contact</label>
        <referenceTo>Contact</referenceTo>
        <relationshipLabel>Transactions</relationshipLabel>
        <relationshipName>Transactions</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Bank_transaction_number__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Bank transaction number</label>
        <length>15</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Banking_Account__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Banking Account</label>
        <referenceTo>Banking_Account__c</referenceTo>
        <relationshipLabel>Transactions</relationshipLabel>
        <relationshipName>Transactions</relationshipName>
        <relationshipOrder>0</relationshipOrder>
        <reparentableMasterDetail>true</reparentableMasterDetail>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>MasterDetail</type>
        <writeRequiresMasterRead>true</writeRequiresMasterRead>
    </fields>
    <fields>
        <fullName>Billed_To_Received_From__c</fullName>
        <deleteConstraint>Restrict</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Billed To / Paid To</label>
        <referenceTo>Account</referenceTo>
        <relationshipLabel>Transactions</relationshipLabel>
        <relationshipName>Transactions</relationshipName>
        <required>true</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Case__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Case</label>
        <referenceTo>Case</referenceTo>
        <relationshipLabel>Transactions</relationshipLabel>
        <relationshipName>Transactions</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Category__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Category</label>
        <picklist>
            <controllingField>Type__c</controllingField>
            <picklistValues>
                <fullName>Advertising</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Assets</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Comission</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Contract Labor</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Employee Benefit</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Fee</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Insurance</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Interest</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Legal/Professional Service</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Non operational Income</fullName>
                <default>false</default>
                <controllingFieldValues>Credit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Office Expense</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Pension/profit-sharing Plan</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Rent or Lease</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Sale Income</fullName>
                <default>false</default>
                <controllingFieldValues>Credit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Service Income</fullName>
                <default>false</default>
                <controllingFieldValues>Credit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Supply</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Tax</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Travel</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Utility</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Vehicle expense</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <picklistValues>
                <fullName>Wage</fullName>
                <default>false</default>
                <controllingFieldValues>Debit</controllingFieldValues>
            </picklistValues>
            <sorted>false</sorted>
        </picklist>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>Department__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Department</label>
        <picklist>
            <picklistValues>
                <fullName>Commercial</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Financial</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>IT</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Warehouse</fullName>
                <default>false</default>
            </picklistValues>
            <sorted>false</sorted>
        </picklist>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>Description__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Description</label>
        <length>32000</length>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>6</visibleLines>
    </fields>
    <fields>
        <fullName>Discount__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Discount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Due_date__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Due date</label>
        <required>true</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Gross_Amount__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Gross Amount</label>
        <precision>18</precision>
        <required>true</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Has_Installments__c</fullName>
        <defaultValue>false</defaultValue>
        <deprecated>false</deprecated>
        <description>If the transaction has installments, this field will be checked</description>
        <externalId>false</externalId>
        <label>Has Installments</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>Interest__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Interest</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Main_Transaction__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Main Transaction</label>
        <referenceTo>Transaction__c</referenceTo>
        <relationshipLabel>Recurrent Transactions</relationshipLabel>
        <relationshipName>Transactions</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Net_Amount__c</fullName>
        <deprecated>false</deprecated>
        <description>If the record is a debit, the value is chaged for a negative value, else the value is kept. The field is used to calculate the account balance.</description>
        <externalId>false</externalId>
        <formula>IF (ISPICKVAL(Type__c, &apos;Debit&apos;),  ( Gross_Amount__c + Interest__c - Discount__c ) * -1 , Gross_Amount__c + Interest__c - Discount__c )</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Net Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Opportunity__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Opportunity</label>
        <referenceTo>Opportunity</referenceTo>
        <relationshipLabel>Transactions</relationshipLabel>
        <relationshipName>Transactions</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Payment_date__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Payment date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Payment_delay__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <formula>IF (ISBLANK(  Payment_date__c), Today()  -  Due_date__c,  Payment_date__c -  Due_date__c )</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Payment delay</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Status__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <formula>IF(
 AND(
  ISBLANK( Payment_date__c ), 
  TODAY() &gt; Due_date__c
 ), &apos;Open delayed&apos;, 
 IF(
  AND (
   NOT(ISBLANK( Payment_date__c )),
   Payment_date__c  &gt; ( Due_date__c + CASE( MOD( Due_date__c - DATE(1900, 1, 7), 7), 0, 1, 6, 2, 0) ) 
  ),
  &apos;Paid delayed&apos;,
  IF(
   AND (
    NOT(ISBLANK( Payment_date__c )),
    Payment_date__c  &lt;= ( Due_date__c + CASE( MOD( Due_date__c - DATE(1900, 1, 7), 7), 0, 1, 6, 2, 0) ) 
   ),
   &apos;Paid on date&apos;,
   &apos;Open&apos;
  )
 )
)</formula>
        <label>Status</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Type__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Type</label>
        <picklist>
            <picklistValues>
                <fullName>Credit</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Debit</fullName>
                <default>false</default>
            </picklistValues>
            <sorted>false</sorted>
        </picklist>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
    </fields>
    <label>Transaction</label>
    <listViews>
        <fullName>All</fullName>
        <columns>NAME</columns>
        <columns>Banking_Account__c</columns>
        <columns>Billed_To_Received_From__c</columns>
        <columns>Status__c</columns>
        <columns>Type__c</columns>
        <columns>Gross_Amount__c</columns>
        <columns>Due_date__c</columns>
        <columns>Payment_date__c</columns>
        <columns>CREATED_DATE</columns>
        <columns>Main_Transaction__c</columns>
        <filterScope>Everything</filterScope>
        <label>All</label>
        <language>en_US</language>
    </listViews>
    <nameField>
        <displayFormat>TRN-{00000000}</displayFormat>
        <label>Transaction</label>
        <trackHistory>false</trackHistory>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>Transactions</pluralLabel>
    <searchLayouts>
        <customTabListAdditionalFields>Billed_To_Received_From__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Banking_Account__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Type__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Gross_Amount__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Status__c</customTabListAdditionalFields>
    </searchLayouts>
    <sharingModel>ControlledByParent</sharingModel>
    <validationRules>
        <fullName>Has_Expenses</fullName>
        <active>true</active>
        <description>If the transaction has expenses, is not allowed to change the amount</description>
        <errorConditionFormula>AND(
   ISCHANGED( Gross_Amount__c ),
   Has_Installments__c
)</errorConditionFormula>
        <errorMessage>Is not allowed to change the Amount because this transaction has expenses</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Payment_date_in_future</fullName>
        <active>true</active>
        <errorConditionFormula>Payment_date__c &gt; TODAY()</errorConditionFormula>
        <errorDisplayField>Payment_date__c</errorDisplayField>
        <errorMessage>The payment date cannot be in future</errorMessage>
    </validationRules>
    <webLinks>
        <fullName>Recurrent_Transactions</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <encodingKey>UTF-8</encodingKey>
        <linkType>url</linkType>
        <masterLabel>Recurrent Transactions</masterLabel>
        <openType>replace</openType>
        <protected>false</protected>
        <url>/apex/afinance__recurrent_transactions?id={!Transaction__c.Id}</url>
    </webLinks>
    <webLinks>
        <fullName>Related_Transactions</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <encodingKey>UTF-8</encodingKey>
        <linkType>url</linkType>
        <masterLabel>Related Transactions</masterLabel>
        <openType>replace</openType>
        <protected>false</protected>
        <url>/apex/afinance__related_transactions?id={!Transaction__c.Id}</url>
    </webLinks>
</CustomObject>
